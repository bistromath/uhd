<!--This defines one NoC-Block.-->
<nocblock>
  <name>Predistorter</name>
  <blockname>Predistorter</blockname>
  <!--There can be several of these:-->
  <ids>
    <id revision="0">99550000</id>
  </ids>
  <ports>
    <sink>
      <name>in</name>
      <type>sc16</type>
    </sink>
    <source>
      <name>out0</name>
      <type>sc16</type>
    </source>
  </ports>
  <registers>
    <setreg>
      <name>MAG_GAIN</name>
      <address>192</address>
    </setreg>
    <setreg>
      <name>SQUELCH</name>
      <address>193</address>
    </setreg>
    <setreg>
      <name>DRIVE_GAIN</name>
      <address>194</address>
    </setreg>
    <setreg>
      <name>FINAL_GAIN</name>
      <address>195</address>
    </setreg>
  </registers>
  <!-- Args -->
  <args>
    <arg>
      <name>mag_gain</name>
      <type>double</type>
      <value>1.0</value>
<!---      <check>GT($mag_gain, 0.0) AND LT($mag_gain, 128.0)</check>
      <check_message>Magnitude gain must be in (0, 128).</check_message>
-->
      <action>SR_WRITE("MAG_GAIN", IROUND(MULT($mag_gain, 256.0)))</action>
    </arg>
    <arg>
      <name>squelch</name>
      <type>double</type>
      <value>0.0</value>
<!--
      <check>GT($squelch, 0.0) AND LT($squelch, 1.0)</check>
      <check_message>Squelch must be in (0, 1).</check_message>
-->
      <action>SR_WRITE("SQUELCH", IROUND(MULT($squelch, 16384.0)))</action>
    </arg>
    <arg>
      <name>drive_gain</name>
      <type>double</type>
      <value>1.0</value>
<!---      <check>GT($drive_gain, 0.0) AND LT($drive_gain, 128.0)</check>
      <check_message>Drive gain must be in (0, 128).</check_message>
-->
      <action>SR_WRITE("DRIVE_GAIN", IROUND(MULT($drive_gain, 256.0)))</action>
    </arg>
    <arg>
      <name>final_gain</name>
      <type>double</type>
      <value>1.0</value>
<!---      <check>GT($final_gain, 0.0) AND LT($final_gain, 128.0)</check>
      <check_message>Final gain must be in (0, 128).</check_message>
-->
      <action>SR_WRITE("FINAL_GAIN", IROUND(MULT($final_gain, 256.0)))</action>
    </arg>
  </args>
  <!--<components>-->
    <!--<component>-->
      <!--<key revision="1">nocshell</key>-->
    <!--</component>-->
    <!--<component srbase="0">-->
      <!--[>Will look for a component with this key:<]-->
      <!--<key revision="1">componentname</key>-->
    <!--</component>-->
  <!--</components>-->
  <!--<connection>-->
    <!--<source port="0">nocshell</source>-->
    <!--<sink port="0">componentname</sink>-->
  <!--</connection>-->
  <!--<connection>-->
    <!--<source port="0">componentname</source>-->
    <!--<sink port="0">nocshell</sink>-->
  <!--</connection>-->
</nocblock>
